external_components:
  - source:
      type: git
      url: https://github.com/heinekmadsen/esphome_GenvexV3
      ref: master
    refresh: 0s
    components: [genvex]

# Root component
genvex:
  id: my_genvex

# Modbus number and sensor to wire climate (example addresses)
number:
  - platform: modbus_controller
    modbus_controller_id: genvex_modbus_controller
    name: "Genvex Target Temperature"
    id: genvex_target_temp
    register_type: holding
    value_type: U_WORD
    min_value: 10
    max_value: 30
    step: 0.1
    address: 0
    lambda: "return ((x+100)/10);"
    write_lambda: |-
      uint16_t new_temp = x * 10 - 100;
      return new_temp;

sensor:
  - platform: modbus_controller
    modbus_controller_id: genvex_modbus_controller
    name: "Genvex Current Temperature"
    id: genvex_current_temp
    unit_of_measurement: "Â°C"
    accuracy_decimals: 1
    device_class: temperature
    value_type: U_WORD
    register_type: read
    address: 6
    lambda: "return ((x - 300) / 10);"

climate:
  - platform: genvex
    name: Genvex
    genvex_id: my_genvex
    current_temp_sensor_id: genvex_current_temp
    target_temp_number_id: genvex_target_temp
